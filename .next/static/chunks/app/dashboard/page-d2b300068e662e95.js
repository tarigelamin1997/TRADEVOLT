(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{104:function(e,t,s){Promise.resolve().then(s.bind(s,4015))},4015:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),r=s(2265),n=s(4839),i=s(6164);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,n.W)(t))}let d=r.forwardRef((e,t)=>{let{className:s,variant:n="default",size:i="default",asChild:d=!1,children:c,...o}=e,x="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",m={default:"bg-gray-900 text-white hover:bg-gray-800",outline:"border border-gray-300 bg-white hover:bg-gray-100",ghost:"hover:bg-gray-100"},h={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8"};return d&&r.isValidElement(c)?r.cloneElement(c,{className:l(x,m[n],h[i],s),ref:t,...o}):(0,a.jsx)("button",{className:l(x,m[n],h[i],s),ref:t,...o,children:c})});d.displayName="Button";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});function o(e){let{onAdd:t}=e,[s,n]=(0,r.useState)({symbol:"",type:"BUY",entry:"",exit:"",quantity:""}),i=async e=>{e.preventDefault();let a=await fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"addTrade",trade:{...s,entry:parseFloat(s.entry),exit:s.exit?parseFloat(s.exit):null,quantity:parseFloat(s.quantity)}})});t((await a.json()).trade),n({symbol:"",type:"BUY",entry:"",exit:"",quantity:""})};return(0,a.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("input",{placeholder:"Symbol",value:s.symbol,onChange:e=>n({...s,symbol:e.target.value}),className:"p-2 border rounded",required:!0}),(0,a.jsxs)("select",{value:s.type,onChange:e=>n({...s,type:e.target.value}),className:"p-2 border rounded",children:[(0,a.jsx)("option",{children:"BUY"}),(0,a.jsx)("option",{children:"SELL"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Entry Price",value:s.entry,onChange:e=>n({...s,entry:e.target.value}),className:"p-2 border rounded",required:!0}),(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Exit Price",value:s.exit,onChange:e=>n({...s,exit:e.target.value}),className:"p-2 border rounded"}),(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Quantity",value:s.quantity,onChange:e=>n({...s,quantity:e.target.value}),className:"p-2 border rounded",required:!0})]}),(0,a.jsx)(d,{type:"submit",className:"w-full",children:"Add Trade"})]})}c.displayName="Card";let x={0:["add-trades","basic-pnl"],1:["ai-insights","csv-export"],2:["advanced-charts","risk-analysis"],3:["trade-replay","position-sizing"]};function m(){let e={id:"demo-user",emailAddresses:[{emailAddress:"demo@example.com"}]},[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[l,m]=(0,r.useState)(""),h=x[Math.floor((Date.now()-new Date("2025-01-01").getTime())/6048e5)%20]||["add-trades","basic-pnl"];(0,r.useEffect)(()=>{e&&fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getTrades",userId:e.id})}).then(e=>e.json()).then(e=>{s(e.trades||[]),i(e.isPaid||!1)})},[e]);let u=t.reduce((e,t)=>t.exit?e+(t.exit-t.entry)*t.quantity*("BUY"===t.type?1:-1):e,0),p=t.filter(e=>!!e.exit&&(e.exit-e.entry)*("BUY"===e.type?1:-1)>0).length/t.filter(e=>e.exit).length*100||0,y=e=>n||h.includes(e),g=async()=>{if(!y("ai-insights")){alert("Upgrade to use AI insights!");return}let e=await fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getAI",trades:t.slice(-20)})});m((await e.json()).insight)};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Your Trading Journal"}),(0,a.jsx)("p",{className:"text-gray-600",children:n?"âœ¨ Ultra Member":"Free: ".concat(h.join(" & ")," this week")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)(c,{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm text-gray-600",children:"Total P&L"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(u>=0?"text-green-600":"text-red-600"),children:["$",u.toFixed(2)]})]}),(0,a.jsxs)(c,{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm text-gray-600",children:"Win Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[p.toFixed(1),"%"]})]}),(0,a.jsxs)(c,{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm text-gray-600",children:"Total Trades"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.length})]})]}),y("add-trades")?(0,a.jsxs)(c,{className:"p-4 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add Trade"}),(0,a.jsx)(o,{onAdd:e=>s([...t,e])})]}):(0,a.jsx)(c,{className:"p-4 mb-8 text-center text-gray-500",children:(0,a.jsx)("p",{children:"Trade entry not in this week's features"})}),(0,a.jsxs)(c,{className:"p-4 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"AI Insights"}),y("ai-insights")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{onClick:g,className:"mb-4",children:"Get AI Analysis"}),l&&(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded",children:(0,a.jsx)("p",{children:l})})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"AI Insights not available this week"}),(0,a.jsx)(d,{asChild:!0,children:(0,a.jsx)("a",{href:"https://buy.stripe.com/your-link",children:"Upgrade for All Features - $25/mo"})})]})]}),(0,a.jsxs)(c,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Recent Trades"}),(0,a.jsx)(d,{onClick:()=>{if(!y("csv-export")){alert("This feature is not in your weekly rotation!");return}let e=new Blob([[["Date","Symbol","Type","Entry","Exit","Quantity","P&L"],...t.map(e=>[new Date(e.createdAt).toLocaleDateString(),e.symbol,e.type,e.entry,e.exit||"",e.quantity,e.exit?(e.exit-e.entry)*e.quantity*("BUY"===e.type?1:-1):""])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="trades.csv",a.click()},variant:"outline",disabled:!y("csv-export"),children:"Export CSV"})]}),(0,a.jsx)("div",{className:"space-y-2",children:t.slice(-10).reverse().map((e,t)=>{let s=e.exit?(e.exit-e.entry)*e.quantity*("BUY"===e.type?1:-1):null;return(0,a.jsxs)("div",{className:"flex justify-between p-2 border rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:e.symbol}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:e.type})]}),(0,a.jsx)("div",{children:null!==s&&(0,a.jsxs)("span",{className:s>=0?"text-green-600":"text-red-600",children:["$",s.toFixed(2)]})})]},t)})})]}),!n&&(0,a.jsx)("div",{className:"fixed bottom-4 right-4",children:(0,a.jsxs)(c,{className:"p-4",children:[(0,a.jsx)("p",{className:"text-sm mb-2",children:"Unlock all 20 features"}),(0,a.jsx)(d,{asChild:!0,children:(0,a.jsx)("a",{href:"https://buy.stripe.com/your-link",children:"Upgrade - $25/mo"})})]})})]})}}},function(e){e.O(0,[868,971,23,744],function(){return e(e.s=104)}),_N_E=e.O()}]);